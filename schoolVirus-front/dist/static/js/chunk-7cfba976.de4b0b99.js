(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7cfba976"],{2017:function(e,r,t){"use strict";t("cafe")},"991e":function(e,r,t){},"9ed6":function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"login-container"},[t("div",{staticClass:"login-form"},[e._m(0),t("el-tabs",{staticClass:"form-tabs",attrs:{stretch:!0},model:{value:e.activeName,callback:function(r){e.activeName=r},expression:"activeName"}},[t("el-tab-pane",{staticClass:"login-tabs",attrs:{label:"log in",name:"first"}},[t("el-form",{ref:"loginFormRef",attrs:{model:e.loginForm,rules:e.loginRules}},[t("el-form-item",{attrs:{prop:"r_account"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"user"}})],1),t("el-input",{attrs:{type:"text",placeholder:"Please enter Username"},model:{value:e.loginForm.r_account,callback:function(r){e.$set(e.loginForm,"r_account",r)},expression:"loginForm.r_account"}})],1),t("el-form-item",{attrs:{prop:"r_pwd"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"password"}})],1),t("el-input",{ref:"password",attrs:{type:e.passwordType,placeholder:"Please enter your password"},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.handleLoginData(r)}},model:{value:e.loginForm.r_pwd,callback:function(r){e.$set(e.loginForm,"r_pwd",r)},expression:"loginForm.r_pwd"}}),t("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[t("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),t("el-form-item",{attrs:{prop:"r_role"}},[t("el-radio-group",{model:{value:e.loginForm.r_role,callback:function(r){e.$set(e.loginForm,"r_role",r)},expression:"loginForm.r_role"}},[t("el-radio-button",{attrs:{label:1,border:""}},[e._v("Student")]),t("el-radio-button",{attrs:{label:2,border:""}},[e._v("Teacher")]),t("el-radio-button",{attrs:{label:3,border:""}},[e._v("Admin")])],1)],1),t("el-form-item",{staticStyle:{width:"100%","margin-bottom":"30px"}},[t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(r){return r.preventDefault(),e.handleLoginData(r)}}},[e._v("log in")]),t("el-button",{attrs:{type:"info"},nativeOn:{click:function(r){return r.preventDefault(),e.resetLoginData(r)}}},[e._v("reset")])],1)],1)],1),t("el-tab-pane",{staticClass:"register-tabs",attrs:{label:"sign up",name:"second"}},[t("el-form",{ref:"registerFormRef",attrs:{model:e.registerForm,rules:e.registerRules}},[t("el-form-item",{attrs:{prop:"r_account"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"user"}})],1),t("el-input",{attrs:{type:"text",placeholder:"Please enter account"},model:{value:e.registerForm.r_account,callback:function(r){e.$set(e.registerForm,"r_account",r)},expression:"registerForm.r_account"}})],1),t("el-form-item",{attrs:{prop:"r_pwd"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"password"}})],1),t("el-input",{ref:"password",attrs:{type:e.passwordType,placeholder:"Please enter your password"},model:{value:e.registerForm.r_pwd,callback:function(r){e.$set(e.registerForm,"r_pwd",r)},expression:"registerForm.r_pwd"}}),t("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[t("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),t("el-form-item",{attrs:{prop:"r_check_pwd"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"password"}})],1),t("el-input",{ref:"password",attrs:{type:e.passwordType,placeholder:"Please confirm your password"},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.handleRegisterData(r)}},model:{value:e.registerForm.r_check_pwd,callback:function(r){e.$set(e.registerForm,"r_check_pwd",r)},expression:"registerForm.r_check_pwd"}}),t("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[t("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),t("el-form-item",{attrs:{prop:"r_serial"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"user"}})],1),t("el-input",{attrs:{type:"text",placeholder:"Please enter a number"},model:{value:e.registerForm.r_serial,callback:function(r){e.$set(e.registerForm,"r_serial",r)},expression:"registerForm.r_serial"}})],1),t("el-form-item",{attrs:{prop:"r_name"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"user"}})],1),t("el-input",{attrs:{type:"text",placeholder:"Please enter your name"},model:{value:e.registerForm.r_name,callback:function(r){e.$set(e.registerForm,"r_name",r)},expression:"registerForm.r_name"}})],1),t("el-form-item",{attrs:{prop:"r_role"}},[t("el-radio-group",{model:{value:e.registerForm.r_role,callback:function(r){e.$set(e.registerForm,"r_role",r)},expression:"registerForm.r_role"}},[t("el-radio-button",{attrs:{label:1,border:""}},[e._v("Student")]),t("el-radio-button",{attrs:{label:2,border:""}},[e._v("Teacher")])],1)],1),t("el-form-item",{staticStyle:{width:"100%","margin-bottom":"30px"}},[t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(r){return r.preventDefault(),e.handleRegisterData(r)}}},[e._v("sign up")]),t("el-button",{attrs:{type:"info"},nativeOn:{click:function(r){return r.preventDefault(),e.resetRegisterData(r)}}},[e._v("reset")])],1)],1)],1)],1)],1)])},a=[function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"login-title"},[t("h3",[e._v("Campus Epidemic Management System")])])}],n=t("1da1"),o=(t("96cf"),t("4d63"),t("ac1f"),t("2c3e"),t("25f0"),t("00b4"),t("d3b7"),t("3191")),i={name:"Login",data:function(){var e=new RegExp("[^a-zA-Z0-9_一-龥]","i"),r=function(r,t,s){!0===e.test(t)?s(new Error("Contains invalid characters, only be letter or number is allowed")):s()};return{activeName:"first",loginForm:{r_account:"18888888888",r_pwd:"a123321",r_role:3},registerForm:{r_account:"",r_pwd:"",r_check_pwd:"",r_role:1,r_serial:"",r_name:""},loginRules:{r_account:[{required:!0,message:"Account is required"},{min:6,max:12,message:"Account length is between 6 and 12 characters",trigger:"change blur focus"},{validator:r}],r_pwd:[{required:!0,message:"Password is required"},{min:6,max:16,message:"Password length is between 6 and 16 characters",trigger:"change blur focus"},{validator:r}],r_role:[{required:!0,message:"Gender is required",trigger:"blur"}]},registerRules:{r_account:[{required:!0,message:"Account is required"},{min:6,max:12,message:"Account length is between 6 and 12 characters",trigger:"change blur focus"},{validator:r}],r_pwd:[{required:!0,message:"Password is required"},{min:6,max:16,message:"Password length is between 6 and 16 characters",trigger:"change blur focus"},{validator:r}],r_check_pwd:[{required:!0,message:"Password is required"},{min:6,max:16,message:"Password length is between 6 and 16 characters",trigger:"change blur focus"},{validator:r}],r_serial:[{required:!0,message:"ID is required",trigger:"change blur focus"}],r_name:[{required:!0,message:"Name is required",trigger:"change blur focus"}],r_role:[{required:!0,message:"Gender is required",trigger:"blur"}]},passwordType:"password",redirect:void 0}},watch:{$route:{immediate:!0,handler:function(e){this.redirect=e.query&&e.query.redirect}}},methods:{showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},resetRegisterData:function(){this.$refs.registerFormRef.resetFields()},handleRegisterData:function(){var e=this;this.$refs.registerFormRef.validate((function(r){if(r)return new Promise(function(){var r=Object(n["a"])(regeneratorRuntime.mark((function r(t,s){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(o["e"])(e.registerForm);case 2:e.$message({message:"Sign up successfully",type:"success"}),window.location.reload(),t();case 5:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}());e.$message({message:"Failed to sign up",type:"error"}),reject()}))},resetLoginData:function(){this.$refs.loginFormRef.resetFields()},handleLoginData:function(){var e=this;this.$refs.loginFormRef.validate(function(){var r=Object(n["a"])(regeneratorRuntime.mark((function r(t){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!t){r.next=4;break}e.$store.dispatch("user/login",e.loginForm).then((function(r){r?(e.$message({message:"Hello, ".concat(r.r_name,", welcome to Campus Epidemic Management System"),type:"success"}),e.$router.push({path:e.redirect||"/"})):e.$message({message:"Hello, maybe the account password is wrong, please check it!",type:"error"})})),r.next=6;break;case 4:return e.$message({message:"Failed to log in",type:"error"}),r.abrupt("return",!1);case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}}},c=i,l=(t("2017"),t("e136"),t("2877")),u=Object(l["a"])(c,s,a,!1,null,"0d371ed2",null);r["default"]=u.exports},cafe:function(e,r,t){},e136:function(e,r,t){"use strict";t("991e")}}]);